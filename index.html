<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=0.8">
        <meta name="description" content="QQ跑团记录着色器">
        <meta name="theme-color" content="#D1EAF7">
        <title>QQ跑团记录着色器</title>
        <!-- 外部库 -->
        <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>     
        <!-- 颜色选择器 -->
        <link href="color-picker.min.css" rel="stylesheet">
        <script src="color-picker.min.js"></script>
        
        <!-- DOCX生成和文件保存 -->
        <script src="https://cdn.jsdelivr.net/npm/docx@6.0.3/build/index.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js"></script>
        
        <!-- 图标 -->
        <link href="favicon.ico" rel="shortcut icon">
        

        <!-- 自定义样式 -->
        <style>
            body {
                background-color: #d1eaf7;
                transition: background-color 1.5s ease;
            }

            #div_page {
                margin: 50px;
            }

            #div_nav {
                margin: 10px;
            }

            #div_names {
                margin-bottom: 20px;
                margin-left: 50px;
                margin-right: 50px;
                margin-top: 20px;
            }

            .button_player {
                text-align: left;
                width: 100%;
            }

            #textarea_log_input {
                height: 300px;
                text-align: left;
            }

            #div_log_output {
                float: left;
                width: 100%;
            }

            #textarea_log_output {
                height: 300px;
                width: 100%;
            }

            .button_controller,
            .button_filter {
                height: 50px;
                width: 155px;
            }

            #div_log_view {
                background-color: #d1eaf7;
                float: left;
                overflow: auto;
                width: 100%;
            }

            .div_center {
                text-align: center;
            }

            .div_italic {
                font-style: italic;
            }

            #div_button {
                margin: 10px;
            }

            .input_name {
                background: transparent;
                border: none;
                height: 34px;
                width: inherit;
            }
        </style>
    </head>

    <body>
        <!-- IE 10及以下浏览器警告 -->
        <!--[if lt IE 10]>
        <div id="div_browser_warning" style="background-color:#979797">
            <h2 style="color:#fff;text-align:center;margin:10px 0;padding:15px">
                你的浏览器已严重过时，请升级到新版本IE或使用Chrome浏览器
            </h2>
        </div>
        <![endif]-->

        <!-- 导航栏 -->
        <div id="div_nav">
            <nav class="navbar navbar-expand-md navbar-light bg-light">
                <a href="#" class="navbar-brand">
                    <img alt="logo" height="30" src="favicon.ico" width="30">
                </a>
                <a href="#" class="navbar-brand">Dice! Logpainter</a>
                
                <button class="navbar-toggler" type="button" data-toggle="collapse" 
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" 
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="https://kokona.tech">Dice! 主站</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://github.com/w4123/logpainter">本项目GitHub</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://github.com/w4123/trpglogger">跑团记录器</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <div id="div_page">
            <!-- 页头 -->
            <div>
                <div class="div_center">
                    <h3 id="header_title">QQ跑团记录着色器</h3>
                    <h5 id="header_version">v2.6 by 风羽(溯洄改)</h5>
                </div>
                <div class="div_italic">
                    <a href="http://aligo.github.io/log-colourer.js">前辈的mirc版传送门</a><br>
                    <a href="javascript:void(0);" id="specialMode1">艾德琳的文本着色器</a>
                    <a href="javascript:void(0);" id="defaultMode">QQ跑团记录着色器</a>
                </div>
                <h6>将QQ聊天记录的【文本】复制到下面这个文本框中，然后点击按钮【Analyze】</h6>
            </div>

            <!-- 日志输入 -->
            <div>
                <textarea class="form-control" id="textarea_log_input"></textarea>
            </div>

            <!-- 控制按钮 -->
            <div class="div_center" id="div_button">
                <div>
                    <button type="button" class="btn btn-info button_filter" id="button_log_command" 
                            style="margin-bottom:2px">
                        指令过滤 On
                    </button>
                    <button type="button" class="btn btn-info button_filter" id="button_log_other" 
                            style="margin-bottom:2px">
                        (开头内容过滤 On
                    </button>
                    <button type="button" class="btn btn-info button_filter" id="button_log_pic_text" 
                            style="margin-bottom:2px">
                        [图片]过滤 On
                    </button>
                    <button type="button" class="btn btn-info button_filter" id="button_log_time" 
                            style="margin-bottom:2px">
                        显示时间 On
                    </button>
                    <button type="button" class="btn btn-info button_filter" id="button_log_nname" 
                            style="margin-bottom:2px">
                        人名头衔过滤 On
                    </button>
                </div>
                <br>
                <div>
                    <button type="button" class="btn btn-success button_controller" id="button_log_analyze" 
                            style="margin-bottom:2px">
                        Analyze
                    </button>
                    <button type="button" class="btn btn-warning button_controller" id="button_log_clear" 
                            style="margin-bottom:2px">
                        清除输入
                    </button>
                    <button type="button" class="btn btn-success button_controller" id="button_palette" 
                            style="margin-bottom:2px; display:none">
                        使用调色盘
                    </button>
                    <button type="button" class="btn btn-success button_controller" id="button_share" 
                            style="margin-bottom:2px; display:none">
                        分享到Dice!论坛
                    </button>
                    <button type="button" class="btn btn-info button_controller" id="button_download_txt" 
                            style="margin-bottom:2px; display:none">
                        下载为txt文档
                    </button>
                    <button type="button" class="btn btn-info button_controller" id="button_download_docx" 
                            style="margin-bottom:2px; display:none">
                        下载为docx文档
                    </button>
                </div>
            </div>

            <br>
            <div class="div_center"></div>

            <!-- 角色列表 -->
            <div id="div_names"></div>

            <!-- 日志输出 -->
            <div id="div_log">
                <h6>复制预览部分内容可得TXT文本（双击以选中所有文本），输出部分为论坛用代码</h6>
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item" role="presentation" 
                        style="background-color:#f6ffbe; border-radius:5px; width:50%">
                        <a href="#div_log_view" class="nav-link active show" aria-controls="div_log_view" 
                           data-toggle="tab" role="tab">
                            预览
                        </a>
                    </li>
                    <li class="nav-item" role="presentation" 
                        style="background-color:#f6ffbe; border-radius:5px; width:50%">
                        <a href="#div_log_output" class="nav-link" aria-controls="div_log_output" 
                           data-toggle="tab" role="tab">
                            输出
                        </a>
                    </li>
                </ul>
                <div class="tab-content" style="display:flex">
                    <div class="tab-pane fade active show" id="div_log_view" role="tabpanel" 
                         style="background-color:#fff; float:left; width:100%; overflow:auto;">
                    </div>
                    <div class="tab-pane fade" id="div_log_output" role="tabpanel">
                        <textarea class="form-control" id="textarea_log_output"></textarea>
                    </div>
                </div>
            </div>
        </div>
        <!-- 角色模板 -->
        <script id="html_player_grid" type="text/html">
            <div class="col-sm-2">
                <input type="text" class="font-control input_name" name="&id" value="&name" 
                       placeholder="删除消息请点右边开关">
            </div>
            <div class="col-sm-2" style="min-width: 150px">
                &select
            </div>
            <div class="col-sm-1" style="min-width: 80px">
                <button type="button" class="btn btn-success button_player" name="&id" 
                        style="text-align: center">
                    On
                </button>
            </div>
            <div class="col-sm-1"></div>
        </script>

        <!-- 页脚 -->
        <div class="div_footer">
            <footer class="container-fluid foot-wrap">
                <p style="text-align:center; margin-top:20px; color:#878b91">
                    原作者：风羽 Copyright ©2017-2019 hina.moe<br>
                    修改：溯洄 Copyright ©2018-2021 kokona.tech<br>
                    维护：南宫 Copyright ©2022-2025 xenport.com
                </p>
            </footer>
        </div>

        <!-- 主脚本 -->
        <script src="script.js"></script>